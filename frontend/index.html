<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>SIPE - Society of Innovation and Professional Excellence</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet"/>
  
  <!-- 
    STEP 1: ADD YOUR CLERK & SUPABASE KEYS HERE
    Replace these placeholder values with your own keys from your Clerk and Supabase dashboards.
  -->
  <script>
    window.CLERK_PUBLISHABLE_KEY = "pk_test_YOUR_CLERK_PUBLISHABLE_KEY"; // Replace with your Clerk Publishable Key
    window.SUPABASE_URL = "https://YOUR_PROJECT_ID.supabase.co"; // Replace with your Supabase Project URL
    window.SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJ3bWxkZWNkaGxyZnFpY3h5bXZiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE5MTEzOTQsImV4cCI6MjA3NzQ4NzM5NH0.hrDkoqpbesAy6kFMzbaFlO7IY181n0yj_nvov2t6J4s"; // Replace with your Supabase Anon Key
  </script>

  <!-- Load Clerk & Supabase Libraries -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script>
    (function () {
      const clerkScript = document.createElement("script");
      clerkScript.setAttribute("data-clerk-publishable-key", window.CLERK_PUBLISHABLE_KEY);
      clerkScript.async = true;
      clerkScript.src = `https://cdn.jsdelivr.net/npm/@clerk/clerk-js@latest/dist/clerk.browser.js`;
      clerkScript.crossOrigin = "anonymous";
      clerkScript.addEventListener("load", async function () {
        await window.Clerk.load();
        window.dispatchEvent(new CustomEvent("clerk-loaded"));
      });
      document.head.appendChild(clerkScript);
    })();
  </script>
  
  <style>
    :root {
      --primary-blue: #0052cc;
      --light-blue: #f0f6ff;
      --dark-blue: #071d49;
      --white: #ffffff;
      --gray-50: #f9fafb; /* Softer gray */
      --gray-100: #f3f4f6; /* Softer gray */
      --gray-600: #4b5563;
      --gray-700: #374151;
      --gray-900: #111827;
      
      /* More subtle, professional shadows */
      --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.04);
      --shadow-md: 0 4px 8px -2px rgba(0, 0, 0, 0.05), 0 2px 4px -2px rgba(0, 0, 0, 0.05);
      --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.06), 0 4px 6px -4px rgba(0, 0, 0, 0.06);
      --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.07), 0 8px 10px -6px rgba(0, 0, 0, 0.07);

      --radius: 16px; /* Softer radius */
      --linkedin-blue: #0077b5;
      --instagram-pink: #e4405f;
      --transition-curve: cubic-bezier(0.25, 0.8, 0.25, 1);
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }
    html { scroll-behavior: smooth; }
    body {
      font-family: 'Inter', sans-serif;
      background-color: var(--white);
      color: var(--gray-900);
      line-height: 1.75; /* Increased line height */
      font-size: 18px; /* Increased base font size */
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      overflow-x: hidden;
    }
    h1, h2, h3 { text-wrap: balance; font-weight: 700; letter-spacing: -0.025em; } /* Tighter letter spacing */

    /* --- Header --- */
    .header {
      background: rgba(255, 255, 255, 0.85); /* Slightly more transparent */
      backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px); /* Stronger blur */
      position: sticky; top: 0; z-index: 100;
      border-bottom: 1px solid var(--gray-100); /* Softer border */
    }
    .header-content {
      max-width: 1280px; margin: 0 auto; padding: 0 2rem;
      display: flex; justify-content: space-between; align-items: center;
      height: 80px;
    }
    .logo {
      font-size: 1.9rem;
       font-weight: 900; /* Bolder logo */
       color: var(--primary-blue);
      transition: transform 0.3s var(--transition-curve); text-decoration: none;
    }
    .logo:hover { transform: scale(1.03); }
    .nav-links { display: flex; gap: 2.2rem; align-items: center; list-style: none; } /* Reduced gap */
    .nav-links a {
      color: var(--gray-700);
      text-decoration: none; font-weight: 500; font-size: 1rem;
      padding: 0.5rem 0;
      transition: color 0.3s var(--transition-curve), transform 0.3s var(--transition-curve);
      position: relative;
    }
    .nav-links a::after {
        content: ''; position: absolute; width: 0; height: 2px;
        bottom: -4px; left: 50%; transform: translateX(-50%); /* Center the underline */
        background: var(--primary-blue);
        transition: width 0.3s var(--transition-curve);
    }
    .nav-links a:hover {
      color: var(--primary-blue);
      transform: translateY(-1px);
    }
    .nav-links a:hover::after { width: 100%; }
    
    /* Clerk Auth Button Styling */
    #clerk-auth-signed-out a {
      background-color: var(--primary-blue); color: var(--white); padding: 0.75rem 1.6rem;
      border: none; border-radius: 12px; /* Softer radius */
      font-weight: 600; cursor: pointer;
      transition: background-color 0.3s var(--transition-curve), transform 0.3s var(--transition-curve), box-shadow 0.3s var(--transition-curve);
      text-decoration: none; display: inline-block;
      box-shadow: var(--shadow-md);
      font-size: 1rem; /* Match nav link font size */
    }
    #clerk-auth-signed-out a:hover {
      background-color: var(--dark-blue);
      transform: translateY(-3px); /* More lift */
      box-shadow: var(--shadow-lg); /* More hover shadow */
    }
    #clerk-auth-signed-in {
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .clerk-user-button-root {
      width: 42px;
      height: 42px;
    }

    /* --- Mobile Menu --- */
    .hamburger { display: none; flex-direction: column; cursor: pointer; gap: 5px; order: 3; padding: 5px;}
    .hamburger span { width: 25px; height: 2px; background: var(--gray-900); border-radius: 2px; transition: all 0.3s var(--transition-curve); }
    .hamburger.active span:nth-child(1) { transform: rotate(45deg) translate(4px, 4px); }
    .hamburger.active span:nth-child(2) { opacity: 0; }
    .hamburger.active span:nth-child(3) { transform: rotate(-45deg) translate(4px, -4px); }
    .mobile-menu {
      display: none; position: absolute; top: 100%; left: 0; right: 0;
      background: var(--white); box-shadow: var(--shadow-lg); padding: 1rem;
      border-bottom-left-radius: var(--radius);
      border-bottom-right-radius: var(--radius);
      transform: translateY(-10px); opacity: 0; visibility: hidden;
      transition: transform 0.3s var(--transition-curve), opacity 0.3s ease, visibility 0.3s ease;
    }
    .mobile-menu.active {
      display: block;
      transform: translateY(0); opacity: 1; visibility: visible;
    }
    .mobile-menu a { display: block; padding: 1rem; color: var(--gray-900); text-decoration: none; border-radius: 12px; font-weight: 500; }
    .mobile-menu a:hover { background: var(--light-blue); color: var(--primary-blue); }
    
    /* Clerk mobile button */
    #clerk-auth-mobile-signed-out a {
      display: block;
      text-align: center;
      margin-top: 1rem;
      background-color: var(--primary-blue); color: var(--white); padding: 0.75rem 1.6rem;
      border: none; border-radius: 12px;
      font-weight: 600; cursor: pointer;
      text-decoration: none;
    }
    #clerk-auth-mobile-signed-out a:hover {
        background-color: var(--dark-blue);
    }


    /* --- Hero Section (Static Image) --- */
    .hero {
      background-color: var(--gray-50); /* Light background */
      padding: 6rem 2rem; /* More padding */
      min-height: calc(90vh - 80px);
      display: flex;
      align-items: center;
    }
    .hero-grid {
        display: grid;
        grid-template-columns: 1fr 1.1fr;
        gap: 5rem; /* More gap */
        align-items: center;
        max-width: 1280px;
        margin: 0 auto;
    }
    .hero-text {
        opacity: 0;
        animation: fade-in-up 1s ease-out 0.2s forwards;
    }
    .hero-text h1 {
        font-size: clamp(3rem, 5.5vw, 4.2rem); /* Larger title */
        color: var(--dark-blue);
        margin-bottom: 1.5rem;
        font-weight: 900; /* Bolder */
        line-height: 1.15;
    }
    .hero-text p {
        font-size: 1.25rem; /* Larger text */
        color: var(--gray-600);
        margin-bottom: 2.5rem;
        max-width: 500px;
    }
    .hero-image-container {
        position: relative;
        height: 500px;
        border-radius: var(--radius);
        overflow: hidden;
        box-shadow: var(--shadow-xl);
        opacity: 0;
        animation: fade-in-up 1s ease-out 0.4s forwards;
    }
    .hero-image-container::before {
        content: '';
        position: absolute;
        top: 0; left: 0; width: 100%; height: 100%;
        background-image: url('Inaugural ceremony of s.i.p.e(2).png');
        background-size: cover;
        background-position: center;
        border-radius: var(--radius);
        animation: scale-pan 20s ease-out forwards; /* New animation */
    }
    .hero-image-container::after { /* Gradient overlay */
        content: '';
        position: absolute;
        top: 0; left: 0; width: 100%; height: 100%;
        background: linear-gradient(0deg, rgba(0,0,0,0.1) 0%, rgba(0,0,0,0) 40%);
        border-radius: var(--radius);
    }
    @keyframes scale-pan {
        from { transform: scale(1); }
        to { transform: scale(1.05); }
    }
    .hero-text .join-btn-container a { /* Use the clerk container ID */
        animation: fade-in-up 1s ease-out 0.6s forwards;
        opacity: 0;
        padding: 1rem 2rem; /* Larger hero button */
        font-size: 1.1rem;
        display: inline-block; /* Make the wrapper block */
    }
    /* Style for the Clerk button inside the hero */
    #hero-join-btn a {
      background-color: var(--primary-blue); color: var(--white); padding: 1rem 2rem;
      border: none; border-radius: 12px;
      font-weight: 600; cursor: pointer;
      transition: background-color 0.3s var(--transition-curve), transform 0.3s var(--transition-curve), box-shadow 0.3s var(--transition-curve);
      text-decoration: none;
      box-shadow: var(--shadow-md);
      font-size: 1.1rem;
    }
    #hero-join-btn a:hover {
      background-color: var(--dark-blue);
      transform: translateY(-3px);
      box-shadow: var(--shadow-lg);
    }

    /* --- General Section Styling --- */
    .section { padding: 8rem 2rem; } /* More section padding */
    .section-content { max-width: 1280px; margin: 0 auto; }
    .section-title { font-size: clamp(2.5rem, 4.5vw, 3.4rem); text-align: center; margin-bottom: 1rem; color: var(--dark-blue); font-weight: 800; }
    .section-subtitle { font-size: 1.3rem; text-align: center; color: var(--gray-600); margin-bottom: 5rem; max-width: 750px; margin-left: auto; margin-right: auto; }
    .bg-light {
      background-color: var(--gray-50);
      background-image: none; /* Removed gradient for cleaner look */
    }
    .loading-placeholder {
      text-align: center;
      color: var(--gray-600);
      font-size: 1.1rem;
      padding: 2rem;
    }

    /* --- ABOUT: Partner Callout & Logo Scroller --- */
    .partner-callout {
      max-width: 1000px;
      margin: 4.5rem auto;
      text-align: left;
      background: var(--white);
      border-left: 6px solid var(--primary-blue);
      box-shadow: var(--shadow-lg);
      border-radius: 0 var(--radius) var(--radius) 0;
      padding: 3.5rem; /* More padding */
    }
    .partner-callout h3 {
      font-size: 1.7rem;
      color: var(--dark-blue);
      margin-bottom: 2.5rem;
      text-align: center;
    }
    .partner-benefits {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 2.5rem;
    }
    .partner-benefit h4 {
      color: var(--primary-blue);
      margin-bottom: 0.5rem;
      display: flex;
      align-items: center;
      gap: 0.7rem;
      font-size: 1.15rem;
    }
    .partner-benefit h4 svg { flex-shrink: 0; width: 24px; height: 24px; }
    .partner-benefit p { color: var(--gray-700); font-size: 1.05rem; }

    /* Logo Scrollers (Shared Styles) */
    .scroller-container { margin-top: 4rem; }
    .scroller-container h3 {
      text-align: center;
      color: var(--gray-700);
      font-weight: 600;
      margin-bottom: 3rem; /* More space */
      font-size: 1.2rem;
    }
    .logo-scroller, .college-scroller {
      width: 100%;
      overflow: hidden;
      mask-image: linear-gradient(to right, transparent, white 15%, white 85%, transparent);
      -webkit-mask-image: linear-gradient(to right, transparent, white 15%, white 85%, transparent);
    }
    .logo-scroller-inner, .college-scroller-inner {
      display: flex;
      width: fit-content;
    }
    .college-scroller-inner { animation: scroll-college 55s linear infinite; }

    .logo-item {
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 0 4rem; /* Padding for scroller */
      user-select: none;
      white-space: nowrap;
    }
    .logo-item img {
        height: 72px; 
        max-width: 240px;
        opacity: 0.7; 
        transition: opacity 0.3s var(--transition-curve);
    }
    .logo-item:hover img {
      opacity: 1;
    }
    
    @keyframes scroll-college {
      0% { transform: translateX(0); }
      100% { transform: translateX(-50%); }
    }

    /* --- Events & Gallery Section --- */
    .event-portfolio-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); 
      gap: 2.5rem; /* More gap */
    }
    
    .event-card {
      position: relative;
      aspect-ratio: 4 / 3;
      border-radius: var(--radius);
      overflow: hidden;
      box-shadow: var(--shadow-md);
      cursor: pointer;
      transition: box-shadow 0.4s var(--transition-curve), transform 0.4s var(--transition-curve);
    }
    .event-card-img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: transform 0.4s var(--transition-curve);
    }
    .event-card-overlay {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(0deg, rgba(7, 29, 73, 0.85) 0%, rgba(0, 0, 0, 0) 65%);
      display: flex;
      align-items: flex-end;
      padding: 1.5rem;
      transition: background 0.4s var(--transition-curve);
    }
    .event-card h3 {
      color: var(--white);
      font-size: 1.3rem;
      transform: translateY(15px);
      opacity: 0;
      transition: transform 0.4s var(--transition-curve), opacity 0.4s var(--transition-curve);
    }
    .event-card::after {
        content: '+';
        position: absolute;
        top: 1rem;
        right: 1rem;
        font-size: 1.5rem;
        font-weight: 300;
        color: var(--white);
        background: rgba(255, 255, 255, 0.2);
        border-radius: 50%;
        width: 32px;
        height: 32px;
        display: flex;
        align-items: center;
        justify-content: center;
        line-height: 1;
        opacity: 0;
        transform: scale(0.5) rotate(-90deg);
        transition: opacity 0.4s var(--transition-curve), transform 0.4s var(--transition-curve);
    }
    .event-card:hover {
      box-shadow: var(--shadow-lg);
      transform: translateY(-5px);
    }
    .event-card:hover .event-card-img {
      transform: scale(1.03);
    }
    .event-card:hover h3 {
      transform: translateY(0);
      opacity: 1;
    }
    .event-card:hover::after {
        opacity: 1;
        transform: scale(1) rotate(0deg);
    }

    /* --- Lightbox Gallery --- */
    .lightbox-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.9);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      z-index: 1000;
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.4s var(--transition-curve), visibility 0.4s ease;
    }
    .lightbox-overlay.active {
      opacity: 1;
      visibility: visible;
    }
    .lightbox-content {
      position: relative;
      width: 90%;
      height: 90%;
      max-width: 1000px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .lightbox-image {
      max-width: 100%;
      max-height: 100%;
      border-radius: var(--radius);
      box-shadow: var(--shadow-xl);
      transition: opacity 0.2s ease-in-out;
    }
    .lightbox-close, .lightbox-prev, .lightbox-next {
      position: absolute;
      background: rgba(255, 255, 255, 0.1);
      color: var(--white);
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 50%;
      width: 48px;
      height: 48px;
      font-size: 1.6rem;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: background-color 0.3s var(--transition-curve), border-color 0.3s var(--transition-curve), transform 0.3s var(--transition-curve);
      user-select: none;
    }
    .lightbox-close:hover, .lightbox-prev:hover, .lightbox-next:hover {
      background: var(--primary-blue);
      border-color: var(--primary-blue);
      transform: scale(1.05);
    }
    .lightbox-close {
      top: 1.5rem;
      right: 1.5rem;
      z-index: 1002;
    }
    .lightbox-prev {
      left: 1.5rem;
      z-index: 1001;
    }
    .lightbox-next {
      right: 1.5rem;
      z-index: 1001;
    }
    .lightbox-counter {
        position: absolute;
        top: 2rem;
        left: 2rem;
        color: var(--white);
        font-size: 1rem;
        font-weight: 500;
        background: rgba(0, 0, 0, 0.4);
        padding: 0.3rem 0.8rem;
        border-radius: 20px;
        z-index: 1001;
    }

    /* --- General Cards --- */
    .cards-grid {
      display: grid;
      gap: 2.5rem; /* More gap */
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      grid-auto-rows: 1fr; /* Equal height rows */
    }
    .card {
      background: var(--white); padding: 2.5rem;
      border-radius: var(--radius);
      box-shadow: var(--shadow-md); text-align: center; border: 1px solid var(--gray-100);
      transition: transform 0.4s var(--transition-curve), box-shadow 0.4s var(--transition-curve);
      opacity: 0;
      transform: translateY(30px);
      display: flex;
      flex-direction: column;
    }
    .card.is-visible {
      opacity: 1;
      transform: translateY(0);
    }
    .card:hover {
      transform: translateY(-8px);
      box-shadow: var(--shadow-lg);
    }
    .card:hover h3 { color: var(--primary-blue); }
    .card h3 {
      font-size: 1.4rem; /* Larger card titles */
      margin-bottom: 0.7rem;
      color: var(--dark-blue);
      transition: color 0.3s var(--transition-curve);
    }
    .card p {
      color: var(--gray-700);
      flex-grow: 1;
      font-size: 1.05rem;
    }
    .card .icon { height: 48px; margin-bottom: 1.5rem; color: var(--primary-blue); }

    /* Person/Mentor Card */
    .person-card p { flex-grow: 0; font-size: 1rem; }
    .person-card img {
      width: 120px; height: 120px; border-radius: 50%; margin-bottom: 1rem;
      object-fit: cover; margin-left: auto; margin-right: auto;
      border: 4px solid var(--white); box-shadow: var(--shadow-md);
      transition: border-color 0.3s var(--transition-curve), transform 0.3s var(--transition-curve);
    }
    .person-card h4 { font-size: 1.25rem; margin-bottom: 0.25rem; }
    .person-card:hover img { 
        border-color: var(--primary-blue);
        transform: scale(1.05);
    }

    /* --- FAQ --- */
    .faq { max-width: 800px; margin: 0 auto; }
    .faq-item {
      background: var(--white);
      margin-bottom: 1rem;
      border-radius: var(--radius);
      border: 1px solid var(--gray-100);
      transition: background-color 0.3s var(--transition-curve);
      overflow: hidden;
    }
    .faq-question {
        background: transparent; padding: 1.75rem; /* More padding */
        font-size: 1.2rem; /* Larger question */
        font-weight: 600;
        color: var(--gray-900); cursor: pointer; border: none; width: 100%; text-align: left;
        display: flex; justify-content: space-between; align-items: center;
    }
    .faq-question::after { content: "+"; font-size: 1.7rem; color: var(--primary-blue); transition: transform 0.3s var(--transition-curve); font-weight: 300; }
    .faq-question.active::after { transform: rotate(45deg); }
    .faq-item:has(.faq-question.active) { background-color: var(--light-blue); }
    .faq-answer {
        max-height: 0;
        overflow: hidden;
        transition: max-height 0.5s cubic-bezier(0.25, 0.8, 0.25, 1);
        color: var(--gray-700);
        font-size: 1.1rem;
    }
    .faq-answer p {
        padding: 0 1.75rem 1.75rem 1.75rem;
        border-top: 1px solid var(--gray-100);
        padding-top: 1.75rem;
        margin: 0;
    }
    .faq-answer.show { max-height: 250px; }

    /* --- Footer --- */
    .footer { background: var(--dark-blue); color: var(--gray-100); padding: 6rem 2rem 3rem; }
    .footer-content {
      max-width: 1280px; margin: 0 auto;
      display: grid; grid-template-columns: 1fr; gap: 3rem; text-align: center;
    }
    @media (min-width: 768px) {
      .footer-content { grid-template-columns: 2fr 1fr 1fr; text-align: left; }
    }
    .footer-about .footer-logo {
      font-size: 2.2rem; font-weight: 900; margin-bottom: 1rem; color: var(--white);
    }
    .footer-about p { opacity: 0.7; max-width: 350px; }
    .footer-links h4, .footer-contact h4 {
      font-size: 1.1rem; font-weight: 600; color: var(--white);
      margin-bottom: 1.5rem; text-transform: uppercase; letter-spacing: 0.05em;
    }
    .footer-links ul { list-style: none; }
    .footer-links li { margin-bottom: 0.8rem; }
    .footer-links a {
      color: var(--gray-100); opacity: 0.7; text-decoration: none;
      transition: opacity 0.3s var(--transition-curve), color 0.3s var(--transition-curve), transform 0.3s var(--transition-curve);
    }
    .footer-links a:hover { opacity: 1; color: var(--white); transform: translateX(3px); }
    .footer-contact p {
      color: var(--gray-100); opacity: 0.7; margin-bottom: 0.8rem;
      word-break: break-word;
    }
    .social-links { margin-top: 1.5rem; display: flex; gap: 1.5rem; }
    .footer-contact .social-links { justify-content: flex-start; }
    @media (max-width: 767px) {
      .footer-contact .social-links { justify-content: center; }
    }
    .social-links a { color: var(--white); text-decoration: none; transition: all 0.3s var(--transition-curve); opacity: 0.8; }
    .social-links a:hover {
        transform: scale(1.1) translateY(-2px);
        opacity: 1;
        color: var(--linkedin-blue);
    }
    .social-links a.instagram:hover { color: var(--instagram-pink); }
    .social-links svg { width: 28px; height: 28px; }
    .footer-bottom {
      max-width: 1280px; margin: 5rem auto 0; padding-top: 2rem;
      border-top: 1px solid rgba(255, 255, 255, 0.2);
      text-align: center; opacity: 0.7; font-size: 0.95rem;
    }

    /* Animation */
    @keyframes fade-in-up {
        from { opacity: 0; transform: translateY(30px); }
        to { opacity: 1; transform: translateY(0); }
    }
    .animate-on-scroll {
        opacity: 0;
        transition: opacity 0.7s cubic-bezier(0.25, 0.8, 0.25, 1), transform 0.7s cubic-bezier(0.25, 0.8, 0.25, 1);
        transform: translateY(30px);
    }
    .animate-on-scroll.is-visible {
        opacity: 1;
        transform: translateY(0);
    }
    
    /* --- NEW: Upcoming Events UI/UX --- */
    #upcoming-events {
      background-color: var(--gray-50); /* Set section to light */
    }
    
    .upcoming-event-card-new {
      display: grid;
      grid-template-columns: 1fr 1.5fr; /* 40% image, 60% text */
      background: var(--white);
      border-radius: var(--radius);
      box-shadow: var(--shadow-lg);
      overflow: hidden;
      max-width: 900px;
      margin: 0 auto;
      transition: transform 0.4s var(--transition-curve), box-shadow 0.4s var(--transition-curve);
    }
    .upcoming-event-card-new:hover {
      transform: translateY(-10px);
      box-shadow: var(--shadow-xl);
    }
    
    .upcoming-event-image {
      background-size: cover;
      background-position: center;
      min-height: 350px; /* Ensure height */
    }
    
    .upcoming-event-info-new {
      padding: 3rem;
      display: flex;
      flex-direction: column;
      justify-content: center;
    }
    
    .event-meta {
      font-size: 0.9rem;
      font-weight: 600;
      color: var(--primary-blue);
      text-transform: uppercase;
      letter-spacing: 0.05em;
      margin-bottom: 0.75rem;
      display: flex;
      align-items: center;
      gap: 0.75rem;
    }
    
    .event-meta .event-tag-new {
      background: var(--light-blue);
      color: var(--primary-blue);
      padding: 0.25rem 0.75rem;
      border-radius: 6px;
    }
    
    .upcoming-event-info-new h3 {
      font-size: 2rem;
      color: var(--dark-blue);
      margin-bottom: 1rem;
    }
    
    .upcoming-event-info-new .event-description-new {
      font-size: 1.1rem;
      color: var(--gray-600);
      margin-bottom: 2rem;
    }
    
    /* Style for the Clerk-injected button */
    .upcoming-event-info-new .join-btn-wrapper a {
      background-color: var(--primary-blue); color: var(--white); padding: 0.75rem 1.6rem;
      border: none; border-radius: 12px;
      font-weight: 600; cursor: pointer;
      transition: background-color 0.3s var(--transition-curve), transform 0.3s var(--transition-curve), box-shadow 0.3s var(--transition-curve);
      text-decoration: none; display: inline-block;
      box-shadow: var(--shadow-md);
      font-size: 1rem;
    }
    .upcoming-event-info-new .join-btn-wrapper a:hover {
      background-color: var(--dark-blue);
      transform: translateY(-3px);
      box-shadow: var(--shadow-lg);
    }

    /* --- Responsive --- */
    @media (max-width: 968px) {
        .nav-links { display: none; }
        .hamburger { display: flex; }
        #clerk-auth-signed-out { display: none; } /* Hide desktop auth button on mobile */
        #clerk-auth-signed-in { display: none; }

        .mobile-menu .join-btn { display: block; text-align: center; margin-top: 1rem; }
        .hero-grid { grid-template-columns: 1fr; text-align: center; gap: 3rem;}
        .hero-text { order: 2; }
        .hero-image-container { order: 1; height: 350px; }
        .hero-text p { margin-left: auto; margin-right: auto; }
        .partner-benefits { grid-template-columns: 1fr; }
        .lightbox-close { top: 10px; right: 10px; width: 40px; height: 40px; }
        .lightbox-prev { left: 10px; width: 40px; height: 40px; }
        .lightbox-next { right: 10px; width: 40px; height: 40px; }
        .lightbox-counter { top: 15px; left: 15px; }
    }
    @media (max-width: 768px) {
        body { font-size: 17px; }
        .section { padding: 5rem 1.5rem; }
        .cards-grid { grid-template-columns: 1fr; }
        .card p { min-height: 0; }
        .event-portfolio-grid { grid-template-columns: 1fr; }
        
        /* Responsive for new event card */
        .upcoming-event-card-new {
          grid-template-columns: 1fr; /* Stack image on top */
        }
        .upcoming-event-info-new {
          padding: 2.5rem;
          text-align: center;
        }
        .event-meta {
          flex-direction: column;
          gap: 0.5rem;
          align-items: center;
        }
    }
  </style>
</head>
<body>

  <header class="header">
    <div class="header-content">
      <a href="#home" class="logo">SIPE</a>
      <nav>
        <ul class="nav-links">
          <li><a href="#about">About</a></li>
          <li><a href="#programs">Programs</a></li>
          <li><a href="#upcoming-events">Upcoming</a></li>
          <li><a href="#events">Events</a></li>
          <li><a href="#mentors">Mentors</a></li>
          <li><a href="#faq">FAQs</a></li>
          <li><a href="gallery.html">Gallery</a></li> 
        </ul>
      </nav>
      <!-- CLERK AUTH REPLACEMENT -->
      <div id="clerk-auth-signed-out"></div>
      <div id="clerk-auth-signed-in"></div>
      <!-- END CLERK AUTH -->
      <div class="hamburger"><span></span><span></span><span></span></div>
    </div>
    <div class="mobile-menu">
      <a href="#about">About</a>
      <a href="#programs">Programs</a>
      <a href="#upcoming-events">Upcoming</a>
      <a href="#events">Events</a>
      <a href="#mentors">Mentors</a>
      <a href="#faq">FAQs</a>
      <a href="gallery.html">Gallery</a>
      <!-- CLERK AUTH REPLACEMENT (MOBILE) -->
      <div id="clerk-auth-mobile-signed-out"></div>
      <!-- END CLERK AUTH (MOBILE) -->
    </div>
  </header>

  <main>
    <section class="hero" id="home">
        <div class="hero-grid">
            <div class="hero-text">
                <h1>Empowering Student Innovation Across Indian Colleges</h1>
                <p>A student-driven, mentor-supported startup creating standardized innovation frameworks for educational institutions nationwide.</p>
                <!-- This div will be targeted by Clerk to mount a Sign In button -->
                <div id="hero-join-btn" class="join-btn-container"></div>
            </div>
            <div class="hero-image-container">
            </div>
        </div>
    </section>

    <section id="about" class="section">
        <div class="section-content">
            <h2 class="section-title">Bridging Academia & Industry</h2>
            <p class="section-subtitle">SIPE's primary goal is to create a standardized, nationwide framework for fostering innovation and entrepreneurship within educational institutions. We connect students with industry mentors, resources, and real-world projects to transform groundbreaking ideas into impactful ventures.</p>

            <div class="partner-callout animate-on-scroll">
              <h3>A Hub for Industry & Academia</h3>
              <div class="partner-benefits">
                <div class="partner-benefit">
                  <h4>
                    <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M23 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path></svg>
                    Access Top Talent
                  </h4>
                  <p>Connect with the brightest student innovators and researchers from our national network.</p>
                </div>
                <div class="partner-benefit">
                  <h4>
                    <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21.21 15.89A10 10 0 1 1 8 2.83"></path><path d="M22 12A10 10 0 0 0 12 2v10z"></path></svg>
                    Drive R&D
                  </h4>
                  <p>Collaborate on real-world projects and workshops to solve your industry challenges.</p>
                </div>
                <div class="partner-benefit">
                  <h4>
                    <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></svg>
                    Enhance Your Brand
                  </h4>
                  <p>Gain visibility as an industry leader committed to nurturing the next generation of excellence.</p>
                </div>
              </div>
            </div>

            <div class="scroller-container">
              <h3>Our Growing Network of Partner Institutions</h3>
              <div class="college-scroller">
                <!-- This div will be populated by Supabase -->
                <div id="college-scroller-inner" class="college-scroller-inner">
                   <!-- Logos removed: nitrr.png, manit.png -->
                  <div class="logo-item"><img src="logos/jec.png" alt="JEC Jabalpur Logo"></div>
                  <div class="logo-item"><img src="logos/iitp.png" alt="IIT Patna Logo"></div>
                  <div class="logo-item"><img src="logos/iiitdmj.png" alt="IIITDM Jabalpur Logo"></div>
                  
                  <!-- Duplicates for scrolling effect -->
                  <div class="logo-item"><img src="logos/jec.png" alt="JEC Jabalpur Logo"></div>
                  <div class="logo-item"><img src="logos/iitp.png" alt="IIT Patna Logo"></div>
                  <div class="logo-item"><img src="logos/iiitdmj.png" alt="IIITDM Jabalpur Logo"></div>
                   <div class="logo-item"><img src="logos/jec.png" alt="JEC Jabalpur Logo"></div>
                  <div class="logo-item"><img src="logos/iitp.png" alt="IIT Patna Logo"></div>
                  <div class="logo-item"><img src="logos/iiitdmj.png" alt="IIITDM Jabalpur Logo"></div>
                </div>
              </div>
            </div>

        </div>
    </section>

    <section id="programs" class="section bg-light">
      <div class="section-content">
        <h2 class="section-title">Programs & Offerings</h2>
        <p class="section-subtitle">Comprehensive initiatives to foster innovation from the classroom to the marketplace.</p>
        <!-- This div will be populated by Supabase -->
        <div id="programs-grid" class="cards-grid">
          <p id="programs-loading" class="loading-placeholder">Loading programs...</p>
        </div>
      </div>
    </section>

    <!-- --- Upcoming Events Section --- -->
    <section id="upcoming-events" class="section bg-light">
      <div class="section-content">
        <h2 class="section-title">Upcoming Events</h2>
        <p class="section-subtitle">Don't miss our next big event. Register now to secure your spot!</p>
        
        <!-- This div will be populated by Supabase -->
        <div id="upcoming-event-container">
          <p id="events-loading" class="loading-placeholder">Loading upcoming events...</p>
        </div>

      </div>
    </section>
    <!-- --- End Upcoming Events Section --- -->

    <section id="events" class="section">
      <div class="section-content">
        <h2 class="section-title">Events Gallery</h2>
        <p class="section-subtitle">A visual journey through our workshops, lectures, and inaugural events. Click any event to see more.</p>

        <!-- This div will be populated by Supabase -->
        <div id="gallery-grid" class="event-portfolio-grid">
          <p id="gallery-loading" class="loading-placeholder">Loading gallery...</p>
        </div>
      </div>
    </section>

    <section id="mentors" class="section bg-light">
      <div class="section-content">
        <h2 class="section-title">Our Esteemed Mentors</h2>
        <p class="section-subtitle">Learn from leaders and visionaries dedicated to nurturing the next generation of innovators.</p>
        <!-- This div will be populated by Supabase -->
        <div id="mentors-grid" class="cards-grid">
          <p id="mentors-loading" class="loading-placeholder">Loading mentors...</p>
        </div>
      </div>
    </section>

    <section id="join" class="section">
      <div class="section-content" style="text-align: center;">
        <h2 class="section-title">Start Your Journey</h2>
        <p class="section-subtitle">Ready to join the innovation revolution? Become a part of our growing network today.</p>
        <!-- This div will be targeted by Clerk to mount a Sign In button -->
        <div id="footer-join-btn" class="join-btn-container"></div>
      </div>
    </section>

    <section id="faq" class="section bg-light">
      <div class="section-content">
        <h2 class="section-title">Frequently Asked Questions</h2>
        <p class="section-subtitle">Everything you need to know about SIPE</p>
        <!-- This div will be populated by Supabase -->
        <div id="faq-container" class="faq">
           <p id="faq-loading" class="loading-placeholder">Loading FAQs...</p>
        </div>
      </div>
    </section>
  </main>

  <footer class="footer">
    <div class="footer-content">
        <div class="footer-about">
          <div class="footer-logo">SIPE</div>
          <p>Society of Innovation and Professional Excellence. Empowering the next generation of innovators across India.</p>
        </div>

        <div class="footer-links">
          <h4>Quick Links</h4>
          <ul>
            <li><a href="#about">About</a></li>
            <li><a href="#programs">Programs</a></li>
            <li><a href="#upcoming-events">Upcoming</a></li>
            <li><a href="#events">Events</a></li>
            <li><a href="#mentors">Mentors</a></li>
            <li><a href="#faq">FAQs</a></li>
            <li><a href="gallery.html">Gallery</a></li>
          </ul>
        </div>

        <div class="footer-contact">
          <h4>Contact Us</h4>
          <p>Jabalpur Engineering College,<br/>Jabalpur, Madhya Pradesh (482011)</p>
          <p>sipe.jecjabalpur@gmail.com</p>
          <div class="social-links">
            <a href="https://www.linkedin.com/posts/society-of-innovation-professional-excellence-sipe_jabalpurengineeringcollege-innovation-skillenhancement-ugcPost-7369716013321306114-V_nx?utm_source=share&utm_medium=member_ios&rcm=ACoAAEHT6JwBwr0xcV47miMRmb_f6Ie0kuPXLew" aria-label="LinkedIn" target="_blank" rel="noopener noreferrer"><svg viewBox="0 0 24 24" fill="currentColor"><path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"/></svg></a>
            <a href="https://www.instagram.com/sipe.jec?igsh=bnliaDh2czZ1cjll" aria-label="Instagram" class="instagram" target="_blank" rel="noopener noreferrer"><svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.85s-.012 3.584-.07 4.85c-.148 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07s-3.584-.012-4.85-.07c-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.85s.012-3.584.07-4.85c.149-3.225 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.85-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948s.014 3.667.072 4.947c.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072s3.667-.014 4.947-.072c4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.947s-.014-3.667-.072-4.947c-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.689-.073-4.948-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.162 6.162 6.162 6.162-2.759 6.162-6.162-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4s1.791-4 4-4 4 1.79 4 4-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.441 1.441 1.441 1.441-.645 1.441-1.441-.645-1.44-1.441-1.44z"/></svg></a>
          </div>
        </div>
    </div>
    <div class="footer-bottom">
      &copy; 2025 Society of Innovation and Professional Excellence. All Rights Reserved.
    </div>
  </footer>

  <div class="lightbox-overlay" id="lightbox">
    <button class="lightbox-close" id="lightbox-close">&times;</button>
    <button class="lightbox-prev" id="lightbox-prev">&#10094;</button>
    <div class="lightbox-content">
      <span class="lightbox-counter" id="lightbox-counter"></span>
      <img src="" alt="Event Gallery Image" class="lightbox-image" id="lightbox-image">
    </div>
    <button class="lightbox-next" id="lightbox-next">&#10095;</button>
  </div>

  <!-- 
    STEP 3: MAIN JAVASCRIPT LOGIC
    This script connects to Supabase, fetches data, and populates the page.
    It also initializes Clerk for authentication.
  -->
  <script type="module">
    // --- Initialize Supabase Client ---
    const { createClient } = supabase;
    const supabaseClient = createClient(window.SUPABASE_URL, window.SUPABASE_ANON_KEY);

    // --- Gallery Data (will be populated from Supabase) ---
    let allGalleries = {};

    // --- Clerk Authentication Mounting ---
    window.addEventListener("clerk-loaded", () => {
      const clerk = window.Clerk;
      
      const clerkAuthSignedOut = document.getElementById("clerk-auth-signed-out");
      const clerkAuthSignedIn = document.getElementById("clerk-auth-signed-in");
      const clerkAuthMobileSignedOut = document.getElementById("clerk-auth-mobile-signed-out");
      const heroJoinBtn = document.getElementById("hero-join-btn");
      const footerJoinBtn = document.getElementById("footer-join-btn");

      // Mount for desktop header
      clerk.mountSignInButton(clerkAuthSignedOut, {
        redirectUrl: "index.html",
        appearance: { elements: { button: "join-btn" } }
      });
      clerk.mountUserButton(clerkAuthSignedIn);

      // Mount for mobile menu
      clerk.mountSignInButton(clerkAuthMobileSignedOut, {
        redirectUrl: "index.html",
        appearance: { elements: { button: "join-btn" } }
      });

      // Mount for Hero section
      clerk.mountSignInButton(heroJoinBtn, {
        redirectUrl: "index.html",
        appearance: { elements: { button: "join-btn" } }
      });

      // Mount for Footer section
      clerk.mountSignInButton(footerJoinBtn, {
        redirectUrl: "index.html",
        appearance: { elements: { button: "join-btn" } }
      });

      // Show/hide based on auth state
      clerk.addListener(({ user }) => {
        if (user) {
          clerkAuthSignedOut.style.display = "none";
          clerkAuthSignedIn.style.display = "block";
          clerkAuthMobileSignedOut.style.display = "none";
          heroJoinBtn.style.display = "none"; // Hide hero button if logged in
          footerJoinBtn.style.display = "none"; // Hide footer button if logged in
        } else {
          clerkAuthSignedOut.style.display = "block";
          clerkAuthSignedIn.style.display = "none";
          clerkAuthMobileSignedOut.style.display = "block";
          heroJoinBtn.style.display = "block";
          footerJoinBtn.style.display = "block";
        }
      });
    });

    // --- Data Loading Functions ---

    /**
     * Loads programs from the 'programs' table in Supabase
     */
    async function loadPrograms() {
      const grid = document.getElementById("programs-grid");
      const loading = document.getElementById("programs-loading");
      
      const { data, error } = await supabaseClient
        .from('programs')
        .select('*')
        .order('id', { ascending: true });

      if (error) {
        console.error("Error loading programs:", error);
        loading.textContent = "Could not load programs.";
        return;
      }

      grid.innerHTML = data.map(program => `
        <div class="card animate-on-scroll">
          <img class="icon" src="${program.icon_svg_url}" alt="Icon">
          <h3>${program.title}</h3>
          <p>${program.description}</p>
        </div>
      `).join('');
      
      // Re-observe for animations
      observeDynamicContent(grid.querySelectorAll('.animate-on-scroll'));
    }

    /**
     * Loads the single most recent upcoming event
     */
    async function loadUpcomingEvent() {
      const container = document.getElementById("upcoming-event-container");
      const loading = document.getElementById("events-loading");

      const { data, error } = await supabaseClient
        .from('upcoming_events')
        .select('*')
        .order('date', { ascending: false }) // Get the most recent one
        .limit(1);

      if (error || !data || data.length === 0) {
        console.error("Error loading upcoming event:", error);
        loading.textContent = "No upcoming events scheduled.";
        return;
      }

      const event = data[0];
      const eventDate = new Date(event.date);
      // Format as "NOVEMBER 04, 2025"
      const month = eventDate.toLocaleString('en-US', { month: 'long' }).toUpperCase();
      const day = eventDate.getDate().toString().padStart(2, '0');
      const year = eventDate.getFullYear();
      const formattedDate = `${month} ${day}, ${year}`;
      const placeholderImg = 'https://placehold.co/600x600/0052cc/white?text=SIPE+Event';

      container.innerHTML = `
        <div class="upcoming-event-card-new animate-on-scroll">
          <div class="upcoming-event-image" style="background-image: url('${event.image_url || placeholderImg}')">
            <!-- Image is a background -->
          </div>
          <div class="upcoming-event-info-new">
            <p class="event-meta">
              <span class="event-date-new">${formattedDate}</span>
              ${event.is_online ? '<span class="event-tag-new">Online Event</span>' : ''}
            </p>
            <h3>${event.title}</h3>
            <p class="event-description-new">${event.description}</p>
            <div class="join-btn-wrapper" id="upcoming-event-join-btn"></div>
          </div>
        </div>
      `;

      // Mount a Clerk sign-in button
      if (window.Clerk) {
        window.Clerk.mountSignInButton(document.getElementById('upcoming-event-join-btn'), {
          redirectUrl: "index.html",
          appearance: { elements: { button: "" } } // Custom style is in CSS
        });
      } else {
        // Fallback if Clerk hasn't loaded yet
        window.addEventListener('clerk-loaded', () => {
           window.Clerk.mountSignInButton(document.getElementById('upcoming-event-join-btn'), {
            redirectUrl: "index.html",
            appearance: { elements: { button: "" } } // Custom style is in CSS
          });
        });
      }


      observeDynamicContent(container.querySelectorAll('.animate-on-scroll'));
    }

    /**
     * Loads gallery events and dynamically builds the lightbox data
     */
    async function loadGalleryAndLightbox() {
      const grid = document.getElementById("gallery-grid");
      const loading = document.getElementById("gallery-loading");

      // 1. Fetch all gallery events (the covers)
      const { data: events, error: eventsError } = await supabaseClient
        .from('gallery_events')
        .select('gallery_key, title, cover_image_url');

      if (eventsError) {
        console.error("Error loading gallery:", eventsError);
        loading.textContent = "Could not load gallery.";
        return;
      }

      // 2. Fetch all gallery images
      const { data: images, error: imagesError } = await supabaseClient
        .from('gallery_images')
        .select('gallery_key, image_url');
      
      if (imagesError) {
        console.error("Error loading gallery images:", imagesError);
        loading.textContent = "Could not load gallery images.";
        return;
      }

      // 3. Build the allGalleries object
      allGalleries = {};
      for (const img of images) {
        if (!allGalleries[img.gallery_key]) {
          allGalleries[img.gallery_key] = [];
        }
        allGalleries[img.gallery_key].push(img.image_url);
      }

      // 4. Populate the grid
      grid.innerHTML = events.map(event => `
        <div class="event-card animate-on-scroll" data-gallery="${event.gallery_key}">
          <img src="${event.cover_image_url}" alt="${event.title}" class="event-card-img"> 
          <div class="event-card-overlay"><h3>${event.title}</h3></div>
        </div>
      `).join('');

      // 5. Re-attach click listeners for the new dynamic cards
      initLightbox();
      observeDynamicContent(grid.querySelectorAll('.animate-on-scroll'));
    }

    /**
     * Loads mentors from the 'mentors' table
     */
    async function loadMentors() {
      const grid = document.getElementById("mentors-grid");
      const loading = document.getElementById("mentors-loading");

      const { data, error } = await supabaseClient
        .from('mentors')
        .select('*')
        .order('display_order', { ascending: true });

      if (error) {
        console.error("Error loading mentors:", error);
        loading.textContent = "Could not load mentors.";
        return;
      }

      grid.innerHTML = data.map(mentor => `
        <div class="card person-card animate-on-scroll">
          <img src="${mentor.image_url}" alt="${mentor.name}"/> 
          <h4>${mentor.name}</h4>
          <p>${mentor.title.replace('\\n', '<br/>')}</p>
        </div>
      `).join('');

      observeDynamicContent(grid.querySelectorAll('.animate-on-scroll'));
    }

    /**
     * Loads FAQs from the 'faqs' table
     */
    async function loadFAQs() {
      const container = document.getElementById("faq-container");
      const loading = document.getElementById("faq-loading");
      
      const { data, error } = await supabaseClient
        .from('faqs')
        .select('*')
        .order('id', { ascending: true });

      if (error) {
        console.error("Error loading FAQs:", error);
        loading.textContent = "Could not load FAQs.";
        return;
      }

      container.innerHTML = data.map(faq => `
        <div class="faq-item">
          <button class="faq-question">${faq.question}</button>
          <div class="faq-answer"><p>${faq.answer}</p></div>
        </div>
      `).join('');

      // Re-attach event listeners for the new dynamic FAQs
      initFAQAccordion();
    }
    

    // --- Lightbox & Animation Helpers ---

    /**
     * Re-initializes FAQ accordion listeners for dynamic content
     */
    function initFAQAccordion() {
      document.querySelectorAll('.faq-question').forEach(button => {
        button.addEventListener('click', () => {
          const answer = button.nextElementSibling;
          const wasActive = button.classList.contains('active');
          
          // Close all others
          document.querySelectorAll('.faq-question').forEach(q => {
            q.classList.remove('active');
            q.nextElementSibling.classList.remove('show');
          });

          // Toggle the clicked one
          if (!wasActive) {
            button.classList.add('active');
            answer.classList.add('show');
          }
        });
      });
    }

    /**
     * Re-initializes Lightbox listeners for dynamic gallery
     */
    function initLightbox() {
        const lightbox = document.getElementById('lightbox');
        const lightboxImg = document.getElementById('lightbox-image');
        const lightboxCounter = document.getElementById('lightbox-counter');
        const lightboxClose = document.getElementById('lightbox-close');
        const lightboxNext = document.getElementById('lightbox-next');
        const lightboxPrev = document.getElementById('lightbox-prev');
        let currentGallery = [];
        let currentIndex = 0;

        function updateLightboxImage() {
          if (currentGallery.length > 0 && currentIndex >= 0 && currentIndex < currentGallery.length) {
            lightboxImg.style.opacity = 0;
            setTimeout(() => {
                lightboxImg.src = currentGallery[currentIndex];
                lightboxImg.style.opacity = 1;
            }, 150);
            lightboxCounter.textContent = `${currentIndex + 1} / ${currentGallery.length}`;
          }
        }
        function openLightbox(galleryKey) {
          if (allGalleries[galleryKey] && allGalleries[galleryKey].length > 0) {
            currentGallery = allGalleries[galleryKey];
            currentIndex = 0;
            updateLightboxImage();
            lightbox.classList.add('active');
            document.body.style.overflow = 'hidden';
          } else {
            console.warn("Gallery not found or empty:", galleryKey);
          }
        }
        function closeLightbox() { lightbox.classList.remove('active'); document.body.style.overflow = 'auto'; }
        function showNextImage() { currentIndex = (currentIndex + 1) % currentGallery.length; updateLightboxImage(); }
        function showPrevImage() { currentIndex = (currentIndex - 1 + currentGallery.length) % currentGallery.length; updateLightboxImage(); }

        document.querySelectorAll('.event-card').forEach(card => {
          // Remove any existing listeners to avoid duplicates
          card.replaceWith(card.cloneNode(true));
        });
        
        document.querySelectorAll('.event-card').forEach(card => {
          // Add the new listener
          card.addEventListener('click', (e) => {
            const galleryKey = e.currentTarget.dataset.gallery;
            if (galleryKey) openLightbox(galleryKey);
          });
        });

        lightboxClose.addEventListener('click', closeLightbox);
        lightboxNext.addEventListener('click', showNextImage);
        lightboxPrev.addEventListener('click', showPrevImage);
        lightbox.addEventListener('click', (e) => { if (e.target === lightbox) closeLightbox(); });
        document.addEventListener('keydown', (e) => {
          if (!lightbox.classList.contains('active')) return;
          if (e.key === 'ArrowRight') showNextImage();
          if (e.key === 'ArrowLeft') showPrevImage();
          if (e.key === 'Escape') closeLightbox();
        });
    }

    /**
     * Initializes the IntersectionObserver for scroll animations
     */
    const observer = new IntersectionObserver((entries) => {
      entries.forEach((entry, index) => {
        if (entry.isIntersecting) {
          const delay = entry.target.dataset.delay || index * 50; 
          entry.target.style.transitionDelay = `${delay}ms`;
          entry.target.classList.add('is-visible');
          observer.unobserve(entry.target);
        }
      });
    }, { threshold: 0.1 });

    function observeDynamicContent(elements) {
      elements.forEach(el => observer.observe(el));
    }

    // --- Initial Page Load ---
    document.addEventListener('DOMContentLoaded', () => {
      // Load all dynamic content
      loadPrograms();
      loadUpcomingEvent();
      loadGalleryAndLightbox();
      loadMentors();
      loadFAQs();

      // Init listeners for static content
      const hamburger = document.querySelector('.hamburger');
      const mobileMenu = document.querySelector('.mobile-menu');
      const navLinks = document.querySelectorAll('.mobile-menu a, .nav-links a');

      hamburger.addEventListener('click', () => {
        hamburger.classList.toggle('active');
        mobileMenu.classList.toggle('active');
        document.body.classList.toggle('mobile-menu-open');
      });

      navLinks.forEach(link => link.addEventListener('click', () => {
        if (mobileMenu.classList.contains('active')) {
          hamburger.classList.remove('active');
          mobileMenu.classList.remove('active');
          document.body.classList.remove('mobile-menu-open');
        }
      }));
    });
  </script>
</body>
</html>

